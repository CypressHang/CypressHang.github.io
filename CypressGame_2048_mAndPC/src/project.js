window.__require=function t(o,a,e){function i(c,r){if(!a[c]){if(!o[c]){var s=c.split("/");if(s=s[s.length-1],!o[s]){var u="function"==typeof __require&&__require;if(!r&&u)return u(s,!0);if(n)return n(s,!0);throw new Error("Cannot find module '"+c+"'")}}var l=a[c]={exports:{}};o[c][0].call(l.exports,function(t){return i(o[c][1][t]||t)},l,l.exports,t,o,a,e)}return a[c].exports}for(var n="function"==typeof __require&&__require,c=0;c<e.length;c++)i(e[c]);return i}({Color:[function(t,o,a){"use strict";cc._RF.push(o,"82262pRX4ZIi53LoTtPP/TW","Color");var e=[];e[0]=cc.color(198,184,172,255),e[2]=cc.color(235,224,213,255),e[4]=cc.color(234,219,193,255),e[8]=cc.color(240,167,118,255),e[16]=cc.color(244,138,89,255),e[32]=cc.color(245,112,85,255),e[64]=cc.color(245,83,52,255),e[128]=cc.color(234,280,183,255),e[256]=cc.color(234,197,87,255),e[512]=cc.color(234,192,71,255),e[1024]=cc.color(146,288,80,255),e[2048]=cc.color(0,176,240,255),o.exports=e,cc._RF.pop()},{}],Game:[function(t,o,a){"use strict";cc._RF.push(o,"739e9pJPLlJnJmjrmU5qq+f","Game");var e=[2,4];cc.Class({extends:cc.Component,properties:{scoreLabel:cc.Label,score:0,title:cc.Label,blockPrefab:cc.Prefab,gap:20,Background:cc.Node,Duration:.1,Menu:cc.Node},start:function(){this.drawbgBlocks(),this.init(),this.addEvendHand()},drawbgBlocks:function(){this.size=(cc.winSize.width-5*this.gap)/4;var t=this.gap+.5*this.size,o=this.size;this.position=[];for(var a=0;a<4;a++){this.position.push([0,0,0,0]);for(var e=0;e<4;e++){var i=cc.instantiate(this.blockPrefab);i.width=this.size,i.height=this.size,this.Background.addChild(i),i.setPosition(cc.v2(t,o)),this.position[a][e]=cc.v2(t,o),t+=this.size+this.gap,i.getComponent("block").setNumber(0)}t=this.gap+.5*this.size,o+=this.size+this.gap}},init:function(){if(this.updateNumber(0),this.blocks)for(var t=0;t<this.blocks.length;t++)for(var o=0;o<this.blocks[t].length;o++)null!=this.blocks[t][o]&&this.blocks[t][o].destroy();this.data=[],this.blocks=[];for(var a=0;a<4;a++)this.data.push([0,0,0,0]),this.blocks.push([null,null,null,null]);this.addBlock(),this.addBlock(),this.addBlock()},updateNumber:function(t){this.score=t,this.scoreLabel.string="\u5206\u6570\uff1a"+t},getFreeBlocks:function(){for(var t=[],o=0;o<4;o++)for(var a=0;a<4;a++)null==this.blocks[o][a]&&t.push({x:o,y:a});return t},addBlock:function(){var t=this.getFreeBlocks();if(0==location)return!1;var o=t[Math.floor(Math.random()*t.length)],a=o.x,i=o.y,n=this.position[a][i],c=cc.instantiate(this.blockPrefab);c.width=this.size,c.height=this.size,this.Background.addChild(c),c.setPosition(n);var r=e[Math.floor(Math.random()*e.length)];return c.getComponent("block").setNumber(r),this.data[a][i]=r,this.blocks[a][i]=c,!0},addEvendHand:function(){var t=this;this.Background.on("touchstart",function(o){t.startPoint=o.getLocation()}),this.Background.on("touchend",function(o){t.touchEnd(o)}),this.Background.on("touchcancel",function(o){t.touchEnd(o)})},touchEnd:function(t){this.endPoint=t.getLocation();var o=this.endPoint.sub(this.startPoint);o.mag()>50&&(Math.abs(o.x)>Math.abs(o.y)?o.x>0?this.moveRight():this.moveLeft():o.y>0?this.moveUp():this.moveDown())},doMove:function(t,o,a){var e=cc.moveTo(this.Duration,o),i=cc.callFunc(function(){a&&a()});t.runAction(cc.sequence(e,i))},moveDown:function(){var t=this;cc.log("\u5f80\u4e0b\u6ed1\u52a8");for(var o=!1,a=function a(e,i,n){if(0!=e&&0!=t.data[e][i])if(0==t.data[e-1][i]){var c=t.blocks[e][i],r=t.position[e-1][i];t.blocks[e-1][i]=c,t.data[e-1][i]=t.data[e][i],t.data[e][i]=0,t.blocks[e][i]=null,t.doMove(c,r,function(){a(e-1,i,n)}),o=!0}else{if(t.data[e-1][i]!=t.data[e][i])return void(n&&n());var s=t.blocks[e][i],u=t.position[e-1][i];t.updateNumber(t.score+t.data[e][i]),t.data[e-1][i]*=2,t.data[e][i]=0,t.blocks[e][i]=null,t.blocks[e-1][i].getComponent("block").setNumber(t.data[e-1][i]),t.doMove(s,u,function(){s.destroy(),n&&n()}),o=!0}else n&&n()},e=[],i=0;i<4;i++)for(var n=0;n<4;n++)0!=this.data[i][n]&&e.push({x:i,y:n});for(var c=0,r=0;r<e.length;r++)a(e[r].x,e[r].y,function(){++c==e.length&&t.afterMove(o)})},moveLeft:function(){var t=this;cc.log("\u5f80\u5de6\u6ed1\u52a8");for(var o=!1,a=function a(e,i,n){if(0!=i&&0!=t.data[e][i])if(0==t.data[e][i-1]){var c=t.blocks[e][i],r=t.position[e][i-1];t.blocks[e][i-1]=c,t.data[e][i-1]=t.data[e][i],t.data[e][i]=0,t.blocks[e][i]=null,t.doMove(c,r,function(){a(e,i-1,n)}),o=!0}else{if(t.data[e][i-1]!=t.data[e][i])return void(n&&n());var s=t.blocks[e][i],u=t.position[e][i-1];t.updateNumber(t.score+t.data[e][i]),t.data[e][i-1]*=2,t.data[e][i]=0,t.blocks[e][i]=null,t.blocks[e][i-1].getComponent("block").setNumber(t.data[e][i-1]),t.doMove(s,u,function(){s.destroy(),n&&n()}),o=!0}else n&&n()},e=[],i=0;i<4;i++)for(var n=0;n<4;n++)0!=this.data[i][n]&&e.push({x:i,y:n});for(var c=0,r=0;r<e.length;r++)a(e[r].x,e[r].y,function(){++c==e.length&&t.afterMove(o)})},moveRight:function(){var t=this;cc.log("\u5f80\u53f3\u6ed1\u52a8");for(var o=!1,a=function a(e,i,n){if(3!=i&&0!=t.data[e][i])if(0==t.data[e][i+1]){var c=t.blocks[e][i],r=t.position[e][i+1];t.blocks[e][i+1]=c,t.data[e][i+1]=t.data[e][i],t.data[e][i]=0,t.blocks[e][i]=null,t.doMove(c,r,function(){a(e,i+1,n)}),o=!0}else{if(t.data[e][i+1]!=t.data[e][i])return void(n&&n());var s=t.blocks[e][i],u=t.position[e][i+1];t.updateNumber(t.score+t.data[e][i]),t.data[e][i+1]*=2,t.data[e][i]=0,t.blocks[e][i]=null,t.blocks[e][i+1].getComponent("block").setNumber(t.data[e][i+1]),t.doMove(s,u,function(){s.destroy(),n&&n()}),o=!0}else n&&n()},e=[],i=0;i<4;i++)for(var n=3;n>=0;n--)0!=this.data[i][n]&&e.push({x:i,y:n});for(var c=0,r=0;r<e.length;r++)a(e[r].x,e[r].y,function(){++c==e.length&&t.afterMove(o)})},moveUp:function(){var t=this;cc.log("\u5f80\u4e0a\u6ed1\u52a8");for(var o=!1,a=function a(e,i,n){if(3!=e&&0!=t.data[e][i])if(0==t.data[e+1][i]){var c=t.blocks[e][i],r=t.position[e+1][i];t.blocks[e+1][i]=c,t.data[e+1][i]=t.data[e][i],t.data[e][i]=0,t.blocks[e][i]=null,t.doMove(c,r,function(){a(e+1,i,n)}),o=!0}else{if(t.data[e+1][i]!=t.data[e][i])return void(n&&n());var s=t.blocks[e][i],u=t.position[e+1][i];t.updateNumber(t.score+t.data[e][i]),t.data[e+1][i]*=2,t.data[e][i]=0,t.blocks[e][i]=null,t.blocks[e+1][i].getComponent("block").setNumber(t.data[e+1][i]),t.doMove(s,u,function(){s.destroy(),n&&n()}),o=!0}else n&&n()},e=[],i=3;i>=0;i--)for(var n=0;n<4;n++)0!=this.data[i][n]&&e.push({x:i,y:n});for(var c=0,r=0;r<e.length;r++)a(e[r].x,e[r].y,function(){++c==e.length&&t.afterMove(o)})},afterMove:function(t){t&&(this.updateNumber(this.score+1),this.addBlock()),this.checkOver()&&this.GameOver()},checkOver:function(){for(var t=0;t<4;t++)for(var o=0;o<4;o++){var a=this.data[t][o];if(0==a)return!1;if(o>0&&this.data[t][o-1]==a)return!1;if(o<3&&this.data[t][o+1]==a)return!1;if(t<3&&this.data[t+1][o]==a)return!1;if(t>0&&this.data[t-1][o]==a)return!1}return!0},GameOver:function(){cc.log("Game Over!"),this.Menu.active=!0},BeginGame:function(){this.Menu.active=!1}}),cc._RF.pop()},{}],Menu:[function(t,o,a){"use strict";cc._RF.push(o,"ab3c0aeRadL35wMjXifx//J","Menu"),cc.Class({extends:cc.Component,properties:{Btn_start:cc.Button},start:function(){},XianShi:function(){this.node.active=!0},YinCang:function(){this.node.active=!1}}),cc._RF.pop()},{}],block:[function(t,o,a){"use strict";cc._RF.push(o,"2acf80aFUJP84ImBZahq36X","block");var e=function(t){return t&&t.__esModule?t:{default:t}}(t("Color"));cc.Class({extends:cc.Component,properties:{numberLabel:cc.Label},start:function(){},setNumber:function(t){0==t&&(this.numberLabel.node.active=!1),this.numberLabel.string=t,t in e.default&&(this.node.color=e.default[t])}}),cc._RF.pop()},{Color:"Color"}]},{},["Color","Game","Menu","block"]);